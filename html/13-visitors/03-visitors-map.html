<!doctype html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QULAY CHAT - Visitors Map</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../assets/qulay-chat-design-system.css">
<script src="https://unpkg.com/lucide@latest" defer></script>
<script src="../assets/qulay-chat-shell.js" defer></script>
<script src="../assets/qulay-chat-runtime.js" defer></script>
<script src="../assets/visitors-interactions.js" defer></script>
</head>
<body data-active-nav="visitors" class="dashboard-shell-page">
<main class="app-content">
  <div class="subnav-scroll">
    <div class="subnav-tabs">
      <a class="subnav-tab" href="./01-visitors-list.html">Online Visitors</a>
      <a class="subnav-tab" href="./02-visitor-profile.html">Visitor Profile</a>
      <a class="subnav-tab active" href="./03-visitors-map.html">Visitors Map</a>
    </div>
  </div>

  <div class="page-header">
    <div>
      <h1>Joylashuv xaritasi</h1>
      <p class="text-muted">Onlayn visitorlar boâ€˜yicha geografik koâ€˜rinish va real-time faollik</p>
    </div>
    <div class="page-header-actions">
      <span class="badge badge-success">ðŸŸ¢ 6 online</span>
      <a class="btn btn-secondary" href="./01-visitors-list.html">List view</a>
    </div>
  </div>

  <section class="split-grid">
    <article class="card">
      <div class="card-header">
        <div>
          <h3>Interactive world map</h3>
          <p class="card-description">Marker ustiga bosib visitor harakatini kuzating</p>
        </div>
        <div class="card-actions">
          <button type="button" class="btn btn-secondary btn-sm" data-action="log" data-message="Map markazga qaytdi">Center</button>
          <button type="button" class="btn btn-secondary btn-sm" data-action="log" data-message="Zoom +">Zoom +</button>
        </div>
      </div>
      <div class="card-body">
        <div class="world-map" data-map-root>
          <div class="world-map-inner" data-map-inner style="position:absolute; inset:0; transform-origin:center center; transition:transform 180ms ease;">
            <svg viewBox="0 0 1000 500" preserveAspectRatio="none" aria-hidden="true">
              <rect x="0" y="0" width="1000" height="500" fill="url(#ocean)"/>
              <defs>
                <linearGradient id="ocean" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="#f8fbff"/>
                  <stop offset="100%" stop-color="#eef4ff"/>
                </linearGradient>
              </defs>
              <g fill="#dbe6f7" stroke="#c9d7f0" stroke-width="2" opacity="0.95">
                <path d="M80 170 C140 120, 230 120, 280 170 C320 208, 300 250, 240 260 C180 270, 120 245, 90 210 Z"/>
                <path d="M310 125 C360 90, 430 95, 470 130 C500 160, 495 200, 450 215 C390 235, 325 205, 305 165 Z"/>
                <path d="M520 145 C570 110, 655 115, 700 150 C730 175, 730 215, 690 235 C635 265, 555 255, 525 210 Z"/>
                <path d="M705 135 C750 110, 810 118, 845 150 C870 175, 865 210, 830 230 C785 255, 730 245, 705 210 Z"/>
              </g>
              <g fill="none" stroke="#c4d2eb" stroke-width="1.5" opacity="0.8">
                <path d="M140 340 C260 300, 370 365, 520 325 C655 289, 770 342, 890 310"/>
              </g>
            </svg>
            <span class="map-marker" data-city="Tashkent" data-country="Uzbekistan" data-page="/pricing" style="left:58%;top:42%"></span>
            <span class="map-marker" data-city="Almaty" data-country="Kazakhstan" data-page="/features" style="left:62%;top:36%"></span>
            <span class="map-marker" data-city="Istanbul" data-country="Turkey" data-page="/contact" style="left:53%;top:34%"></span>
            <span class="map-marker" data-city="Berlin" data-country="Germany" data-page="/help" style="left:48%;top:28%"></span>
            <span class="map-marker" data-city="Dubai" data-country="UAE" data-page="/enterprise" style="left:60%;top:47%"></span>
            <span class="map-marker" data-cluster="3 visitors" data-city="Tashkent cluster" data-country="Uzbekistan" data-page="/home" style="left:56.5%;top:39%; width:22px; height:22px; background:#4F46E5; box-shadow:0 0 0 8px rgba(79,70,229,.16);"><span style="position:absolute; inset:0; display:grid; place-items:center; color:#fff; font-size:10px; font-weight:700;">3</span></span>
          </div>
          <div data-map-tooltip style="position:absolute; pointer-events:none; z-index:5; background:#111827; color:#fff; font-size:12px; padding:6px 8px; border-radius:8px; opacity:0; transform:translate(-50%,-120%); transition:opacity .15s ease;"></div>
          <div data-map-popup hidden style="position:absolute; z-index:8; min-width:220px; background:#fff; border:1px solid #E5E7EB; border-radius:12px; box-shadow:0 12px 24px rgba(15,23,42,.18); padding:10px; transform:translate(-50%,-110%);">
            <div style="font-size:13px; font-weight:600;" data-map-popup-title>Visitor</div>
            <div style="font-size:12px; color:#6B7280; margin-top:2px;" data-map-popup-sub>/pricing</div>
            <div class="flex gap-2" style="margin-top:8px;">
              <button type="button" class="btn btn-secondary btn-sm" data-map-open-profile>Ko'rish</button>
              <button type="button" class="btn btn-primary btn-sm" data-map-start-chat>Chat boshlash</button>
            </div>
          </div>
        </div>
      </div>
    </article>

    <article class="card">
      <div class="card-header"><div><h3>Top countries</h3></div></div>
      <div class="card-body">
        <div class="kv-list">
          <div class="kv-row"><span>ðŸ‡ºðŸ‡¿ Uzbekistan</span><strong>28</strong></div>
          <div class="kv-row"><span>ðŸ‡°ðŸ‡¿ Kazakhstan</span><strong>12</strong></div>
          <div class="kv-row"><span>ðŸ‡¹ðŸ‡· Turkey</span><strong>9</strong></div>
          <div class="kv-row"><span>ðŸ‡ºðŸ‡¸ United States</span><strong>6</strong></div>
          <div class="kv-row"><span>ðŸ‡¦ðŸ‡ª UAE</span><strong>4</strong></div>
        </div>
        <div class="divider"></div>
        <div class="text-muted" style="font-size:13px">Live feed pastdagi kartada avtomatik yangilanadi</div>
      </div>
    </article>
  </section>

  <section class="card" data-map-live-feed>
    <div class="card-header">
      <div>
        <h3>Soâ€˜nggi faollik</h3>
        <p class="card-description">Visitor harakatlari real-time timeline</p>
      </div>
    </div>
    <div class="card-body">
      <div class="list-stack" data-map-feed-list></div>
    </div>
  </section>

  <section class="card">
    <div class="card-header"><div><h3>Visitors by country</h3></div></div>
    <div class="card-body">
      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr class="table-header">
              <th>Country</th><th>Visitors</th><th>Active</th><th>Avg duration</th><th>Top page</th>
            </tr>
          </thead>
          <tbody>
            <tr class="table-row"><td>Uzbekistan</td><td>124</td><td>23</td><td>03:21</td><td>/pricing</td></tr>
            <tr class="table-row"><td>Kazakhstan</td><td>41</td><td>8</td><td>02:45</td><td>/features</td></tr>
            <tr class="table-row"><td>Turkey</td><td>29</td><td>5</td><td>02:18</td><td>/contact</td></tr>
            <tr class="table-row"><td>United States</td><td>18</td><td>3</td><td>04:02</td><td>/demo</td></tr>
            <tr class="table-row"><td>UAE</td><td>16</td><td>4</td><td>03:37</td><td>/enterprise</td></tr>
            <tr class="table-row"><td>India</td><td>14</td><td>2</td><td>01:56</td><td>/api</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </section>
</main>
<script>window.addEventListener("DOMContentLoaded", function(){ if (window.lucide && window.lucide.createIcons) { window.lucide.createIcons(); } });</script>
</body>
</html>